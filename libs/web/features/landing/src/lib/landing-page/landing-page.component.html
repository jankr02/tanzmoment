<!-- ============================================================================
     LANDING PAGE TEMPLATE (Migriert zu Wave-Divider)
     ============================================================================
     Die manuelle Wave-SVG wurde durch die tm-wave-divider Komponente ersetzt.
     Dies vereinfacht die Wartung und sorgt für konsistente Wave-Übergänge.
     ============================================================================ -->

@if (showSplash()) {
<tm-splash-screen
  [config]="splashConfig"
  [svgPath]="'assets/images/intro-sequence-animated.svg'"
  (completed)="onSplashCompleted($event)"
  (progressChange)="onSplashProgressChange($event)"
/>
}

@if (!showSplash()) {
<div class="landing-page" [@fadeIn]>
  <main class="landing-page__main">

    <!-- ─────────────────────────────────────────────────────────────────────
         HERO SECTION
         Hintergrund: Bilder (keine feste Farbe)
         ───────────────────────────────────────────────────────────────────── -->
    @if (showHero()) {
    <section class="landing-page__hero">
      <tm-hero-gallery (ready)="onHeroReady()" (loadError)="onHeroError($event)" />

      <!--
        Wave Divider im Overlay-Modus
        - overlay=true: Positioniert sich absolut am unteren Rand der Hero-Section
        - from="transparent": Kein sichtbarer Hintergrund über den Hero-Bildern
        - to="neutral": Übergang zur neutral-farbigen Intro-Section
        - variant="hero": Verwendet den originalen Landing-Page Wave-Pfad
        - shadow=true: Subtiler Schatten für Tiefe
        - height="lg": Responsive Höhen (100px desktop, 60px mobile)

        Note: Wave Divider wird am Ende der Section positioniert, um Layout-Verschiebungen zu vermeiden.
        Mit [overlay]="true" wird es absolut positioniert und beeinflusst nicht den Document Flow.
      -->
      <tm-wave-divider
        from="transparent"
        to="neutral"
        variant="hero"
        height="lg"
        [overlay]="true"
        [shadow]="true"
      />
    </section>
    }

    <!-- ─────────────────────────────────────────────────────────────────────
         INTRO SECTION
         Hintergrund: neutral (--color-neutral-xl)
         ───────────────────────────────────────────────────────────────────── -->
    @if (showHero()) {
      <tm-landing-intro-section [data]="introData()" />
    }

    <!-- ─────────────────────────────────────────────────────────────────────
         FEATURES SECTION
         Hintergrund: neutral (--color-neutral-xl)
         Keine Wave nötig, da gleiche Farbe wie Intro Section
         ───────────────────────────────────────────────────────────────────── -->
    <section class="landing-page__features">
      <h2 class="features-title">Was dich bei Tanzmoment erwartet</h2>

      <!-- Features Loading State (Skeleton) -->
      @if (featuresLoading()) {
      <tm-skeleton-feature-grid />
      }

      <!-- Features Error State (with Retry) -->
      @else if (featuresError()) {
      <div class="features-error">
        <div class="features-error__content">
          <svg
            class="features-error__icon"
            width="48"
            height="48"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="2"
            />
            <line
              x1="12"
              y1="8"
              x2="12"
              y2="12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <circle cx="12" cy="16" r="1" fill="currentColor" />
          </svg>

          <p class="features-error__message">
            Die Features konnten nicht geladen werden.
          </p>

          <button
            class="features-error__retry"
            (click)="retryFeatures()"
            type="button"
          >
            Erneut versuchen
          </button>
        </div>
      </div>
      }

      <!-- Features Ready State (Actual Content) -->
      @else if (showFeatures()) {
      <tm-feature-navigation />
      }

      <!-- Features Idle State (shouldn't normally be visible) -->
      @else {
      <tm-skeleton-feature-grid />
      }
    </section>

  </main>
</div>
}
