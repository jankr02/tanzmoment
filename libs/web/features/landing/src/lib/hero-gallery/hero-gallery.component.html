<!--
  Enhanced Hero Gallery Component Template
  
  Features Phase 3.3 enhancements:
  - Skeleton screen during initial load
  - Smooth fade-in transition from skeleton to content
  - Conditional rendering based on loading state
-->

<!-- Skeleton Screen (shows while first image loading) -->
@if (isFirstImageLoading()) {
<tm-skeleton-hero [indicatorCount]="slides.length" [showQuote]="true" />
}

<!-- Hero Gallery Content (shows when ready) -->
@if (isReady()) {
<div class="hero-gallery" [@fadeIn]>
  <!-- Background Images Container - All images pre-rendered for smooth transitions -->
  <div class="hero-gallery__background">
    @for (slide of slides; track slide.id; let i = $index) {
    <img
      [src]="slide.imageUrl"
      [alt]="slide.alt"
      class="hero-gallery__image"
      [class.hero-gallery__image--active]="i === currentSlideIndex()"
    />
    }

    <!-- Overlay for better text readability -->
    <div class="hero-gallery__overlay"></div>
  </div>

  <!-- Left Illustration (Wind) -->
  <div class="hero-gallery__illustration hero-gallery__illustration--wind">
    <img src="assets/images/illustrations/Wind.svg" alt="" aria-hidden="true" />
  </div>

  <!-- Right Illustrations (Silhouette + Leafs) -->
  <div class="hero-gallery__illustration hero-gallery__illustration--right">
    <img
      src="assets/images/illustrations/Leafs.svg"
      alt=""
      aria-hidden="true"
      class="hero-gallery__illustration-leafs"
    />
    <img
      src="assets/images/illustrations/Silhouette_1.svg"
      alt=""
      aria-hidden="true"
      class="hero-gallery__illustration-silhouette"
    />
  </div>

  <!-- Navigation Buttons -->
  <button
    class="hero-gallery__nav hero-gallery__nav--prev"
    (click)="previousSlide()"
    aria-label="Vorheriges Bild"
    type="button"
  >
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M15 18L9 12L15 6"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  </button>

  <button
    class="hero-gallery__nav hero-gallery__nav--next"
    (click)="nextSlide()"
    aria-label="NÃ¤chstes Bild"
    type="button"
  >
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M9 18L15 12L9 6"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  </button>

  <!-- Quote Section (Inside hero, above indicators) with Fade + Slide-Up Animation -->
  @if (currentSlide().quote) {
  <div class="hero-gallery__quote-container">
    <p class="hero-gallery__quote">"{{ currentSlide().quote }}"</p>
  </div>
  }

  <!-- Slide Indicators -->
  <div class="hero-gallery__indicators">
    @for (slide of slides; track slide.id; let i = $index) {
    <button
      class="hero-gallery__indicator"
      [class.hero-gallery__indicator--active]="i === currentSlideIndex()"
      (click)="goToSlide(i)"
      [attr.aria-label]="'Zu Bild ' + (i + 1) + ' wechseln'"
      [attr.aria-current]="i === currentSlideIndex() ? 'true' : null"
      type="button"
    ></button>
    }
  </div>
</div>
}
