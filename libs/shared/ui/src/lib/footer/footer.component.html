<!-- ============================================================================
     FOOTER COMPONENT V1 â€“ Mobile First
     ============================================================================ 
-->

<footer
  [class]="footerClasses()"
>
  
  <!-- ============================================================================
       WAVE DIVIDER (Replaces custom SVG shapes)
       ============================================================================ -->

  <div class="footer__wave-wrapper">
    <tm-wave-divider
      [from]="waveFrom"
      [to]="waveTo"
      [variant]="waveVariant"
      [height]="waveHeight"
      [direction]="waveDirection"
      [shadow]="waveShadow"
    />
  </div>

  <!-- ============================================================================
       MAIN CONTENT
       ============================================================================ -->

  <div class="footer__content container">
    
    <!-- ============================================================================
         SECTION 1: Branding & Navigation
         ============================================================================ -->
    
    <div class="footer__main">
      
      <!-- LEFT: Branding -->
      <div class="footer__branding">
        <a 
          [href]="homeUrl" 
          class="footer__logo-link"
          [attr.aria-label]="logoAlt"
        >
          <img 
            [src]="logoUrl" 
            [alt]="logoAlt"
            class="footer__logo"
            width="79"
            height="66"
          />
        </a>
        
        @if (slogan) {
          <p class="footer__slogan">{{ slogan }}</p>
        }
        
        <!-- Social Media Links -->
        @if (socialLinks.length > 0) {
          <div class="footer__social">
            <a href="https://instagram.com/tanzmoment">
              <app-icon name="instagram" size="md" />
            </a>
            <a href="https://facebook.com/tanzmoment">
              <app-icon name="facebook" size="md" />  
            </a>
          </div>
        }
      </div>
      
      <!-- CENTER: Navigation -->
      @if (navColumns.length > 0) {
        <nav class="footer__nav" [attr.aria-label]="'Footer Navigation'">
          @for (column of navColumns; track column.title) {
            <div class="footer__nav-column">
              <h3 class="footer__nav-title">{{ column.title }}</h3>
              <ul class="footer__nav-list">
                @for (link of column.links; track link.label) {
                  <li class="footer__nav-item">
                    <a 
                      [href]="link.url || link.route"
                      [target]="link.external ? '_blank' : '_self'"
                      [rel]="link.external ? 'noopener noreferrer' : null"
                      class="footer__nav-link"
                      (click)="onNavLinkClick(link)"
                    >
                      @if (link.iconName) {
                        <app-icon [name]="link.iconName" size="sm" />
                      }
                      {{ link.label }}
                    </a>
                  </li>
                }
              </ul>
            </div>
          }
        </nav>
      }
      
      <!-- RIGHT: Newsletter or Contact Info -->
      <div class="footer__cta">
        
        <!-- Newsletter Signup -->
        @if (showNewsletter) {
          <div class="footer__newsletter">
            <h3 class="footer__newsletter-title">{{ newsletterTitle }}</h3>
            @if (newsletterSubtitle) {
              <p class="footer__newsletter-subtitle">{{ newsletterSubtitle }}</p>
            }
            
            @if (!newsletterSuccess()) {
              <form 
                class="footer__newsletter-form"
                (submit)="$event.preventDefault(); onNewsletterSubmit()"
              >
                <input
                  type="email"
                  [(ngModel)]="newsletterEmail"
                  name="newsletter-email"
                  [placeholder]="newsletterPlaceholder"
                  class="footer__newsletter-input"
                  required
                  [disabled]="newsletterLoading()"
                />
                <button
                  type="submit"
                  class="footer__newsletter-btn"
                  [disabled]="newsletterLoading()"
                  [attr.aria-label]="newsletterButtonText"
                >
                  @if (newsletterLoading()) {
                    <svg class="footer__newsletter-spinner" width="18" height="18" viewBox="0 0 24 24">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"/>
                      <path d="M12 2 A10 10 0 0 1 22 12" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"/>
                    </svg>
                  } @else {
                    <app-icon name="mail" size="sm" />
                  }
                </button>
              </form>
              
              @if (newsletterError()) {
                <p class="footer__newsletter-error">{{ newsletterError() }}</p>
              }
            } @else {
              <div class="footer__newsletter-success">
                <app-icon name="check-circle" size="md" color="success" />
                <p>Vielen Dank! Wir haben deine Anmeldung erhalten.</p>
              </div>
            }
          </div>
        }
        
        <!-- Contact Info -->
        @if (showContactInfo && contactInfo) {
          <div class="footer__contact">
            <h3 class="footer__contact-title">Kontakt</h3>
            
            @if (contactInfo.address) {
              <div class="footer__contact-item">
                <app-icon name="map-pin" size="sm" color="text-secondary" />
                <a
                  [href]="contactInfo.mapUrl || '#'"
                  [target]="contactInfo.mapUrl ? '_blank' : '_self'"
                  class="footer__contact-link"
                  (click)="contactInfo.showMap ? openMap() : $event.preventDefault()"
                >
                  {{ formattedAddress }}
                </a>
              </div>
            }
            
            @if (contactInfo.email) {
              <div class="footer__contact-item">
                <app-icon name="mail" size="sm" color="text-secondary" />
                <a 
                  [href]="'mailto:' + contactInfo.email"
                  class="footer__contact-link"
                >
                  {{ contactInfo.email }}
                </a>
              </div>
            }
            
            @if (contactInfo.phone) {
              <div class="footer__contact-item">
                <app-icon name="phone" size="sm" color="text-secondary" />
                <a
                  [href]="'tel:' + contactInfo.phone"
                  class="footer__contact-link"
                >
                  {{ contactInfo.phone }}
                </a>
              </div>
            }
          </div>
        }
      </div>
    </div>
    
    <!-- ============================================================================
         SECTION 2: Bottom Bar (Copyright & Legal Links)
         ============================================================================ -->
    
    <div class="footer__bottom">
      <div class="footer__bottom-left">
        <p class="footer__copyright">{{ copyrightText }}</p>
      </div>
      
      <div class="footer__bottom-right">
        <ul class="footer__legal-list">
          @for (link of legalLinks; track link.label) {
            <li class="footer__legal-item">
              <a 
                [href]="link.url || link.route"
                [target]="link.external ? '_blank' : '_self'"
                [rel]="link.external ? 'noopener noreferrer' : null"
                class="footer__legal-link"
              >
                {{ link.label }}
              </a>
            </li>
          }
        </ul>
      </div>
    </div>
  </div>
</footer>

<!-- ============================================================================
     SCROLL-TO-TOP BUTTON
     ============================================================================ -->

@if (showScrollTop && showScrollTopButton()) {
  <button
    class="footer__scroll-top"
    (click)="scrollToTop()"
    [attr.aria-label]="'Nach oben scrollen'"
  >
    <app-icon name="chevron-up" size="lg" color="current" />
  </button>
}